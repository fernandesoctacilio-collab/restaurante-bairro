<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Restaurante de Bairro ‚Ä¢ MVP v3</title>
  <meta name="theme-color" content="#EF4444">
  <meta name="description" content="Pedidos online, marmitas, montar prato e fidelidade.">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon-180.png">
  <link rel="manifest" href="manifest.webmanifest" type="application/manifest+json">
  <link rel="icon" href="assets/icons/icon-192.png" sizes="192x192">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root { --brand:#EF4444; --brand-2:#B91C1C; --accent:#F59E0B; }
    html,body { height:100%; background:#1F2937; color:#F3F4F6; font-family:'Poppins',sans-serif; }
    .hero {
      background: radial-gradient(1000px 400px at 80% -20%, rgba(239,68,68,.35), transparent),
                  radial-gradient(800px 350px at 10% 120%, rgba(245,158,11,.20), transparent);
    }
    .chip { border:1px solid #4B5563; border-radius:999px; padding:.45rem .8rem; }
    .chip[aria-selected="true"] { background:#374151; color:#FFE08A; border-color:#6B7280; }
    .btn { background: var(--brand); border-radius: .9rem; padding:.75rem 1rem; font-weight:800; }
    .btn-outline { border:2px solid var(--brand); color:var(--brand); background:transparent; border-radius:.9rem; padding:.6rem .9rem; font-weight:700; }
    .card { border:1px solid #374151; border-radius:1.1rem; overflow:hidden; background:#111827; }
    .card img { width:100%; height:190px; object-fit:cover; }
    .grid-auto-fit { display:grid; grid-template-columns:repeat(auto-fit,minmax(230px,1fr)); gap:1rem; }
    .glass { background:rgba(255,255,255,0.06); backdrop-filter: blur(8px); }
    .pill { background:#28354A; border-radius:999px; padding:.3rem .7rem; font-size:.75rem; }
    .floating-cart { position:fixed; right:1rem; bottom:1rem; z-index:50; }
    .shadow-smooth { box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    a.navlink { text-decoration:none; }
  </style>
</head>
<body>
  <header class="hero sticky top-0 z-40">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <img src="assets/icons/icon-192.png" class="w-11 h-11 rounded-xl" alt="logo">
        <div>
          <h1 class="text-xl md:text-2xl font-extrabold tracking-tight">Restaurante de Bairro</h1>
          <p class="text-xs text-gray-300 -mt-1">Sabor de casa, na sua casa.</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="installBtn" class="btn btn-outline hidden">Instalar App</button>
        <a class="chip navlink" href="#conta">Minha Conta</a>
      </div>
    </div>
    <nav class="max-w-6xl mx-auto px-4 pb-4">
      <div class="flex gap-2 overflow-x-auto p-1 bg-gray-900/40 rounded-xl">
        <a class="chip navlink" href="#home" aria-selected="true">In√≠cio</a>
        <a class="chip navlink" href="#cardapio">Card√°pio</a>
        <a class="chip navlink" href="#montar">Monte seu prato</a>
        <a class="chip navlink" href="#marmitas">Marmitas</a>
        <a class="chip navlink" href="#promocoes">Promo√ß√µes</a>
        <a class="chip navlink" href="#fidelidade">Fidelidade</a>
        <a class="chip navlink" href="#avaliacoes">Avalia√ß√µes</a>
        <a class="chip navlink" href="#conta">Conta</a>
        <a class="chip navlink" href="#carrinho">Carrinho</a>
      </div>
    </nav>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <section id="view-home" class="space-y-6">
      <div class="grid lg:grid-cols-3 gap-4">
        <div class="lg:col-span-2 card shadow-smooth">
          <img alt="Prato da casa" src="https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=1600&auto=format&fit=crop" />
          <div class="p-4">
            <h2 class="text-2xl font-bold">Prato do Dia: Parmegiana da Casa</h2>
            <p class="text-sm text-gray-300">Acompanha arroz branco, feij√£o e batata palha.</p>
            <div class="flex items-center justify-between mt-3">
              <span class="text-2xl font-extrabold text-amber-300">R$ 39,90</span>
              <button class="btn" onclick="addPratoDoDia()">Pedir agora</button>
            </div>
          </div>
        </div>
        <div class="card p-4">
          <h3 class="font-bold text-lg">Ter√ßa do Pastel ü•ü</h3>
          <p class="text-sm text-gray-300">Cupom <span class="pill">PASTELTERCA</span> (10% OFF).</p>
          <h3 class="font-bold text-lg mt-4">Quarta do Executivo üçΩÔ∏è</h3>
          <p class="text-sm text-gray-300">Cupom <span class="pill">QUARTAPRATO</span> (15% OFF).</p>
          <h3 class="font-bold text-lg mt-4">Bem-vindo üéâ</h3>
          <p class="text-sm text-gray-300">Primeiro pedido? <span class="pill">BEMVINDO</span> d√° 20% OFF.</p>
        </div>
      </div>
    </section>

    <section id="view-cardapio" class="hidden space-y-4">
      <div class="flex items-center gap-2 flex-wrap">
        <input id="search" placeholder="Buscar no card√°pio..." class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 w-full md:w-64" />
        <div class="flex gap-2">
          <button class="chip" data-filter="all">Tudo</button>
          <button class="chip" data-filter="vegetariano">Vegetariano</button>
          <button class="chip" data-filter="vegano">Vegano</button>
          <button class="chip" data-filter="sem_gluten">Sem gl√∫ten</button>
        </div>
      </div>
      <div id="menuGrid" class="grid-auto-fit"></div>
    </section>

    <section id="view-montar" class="hidden space-y-4">
      <div class="card p-4 space-y-3">
        <h2 class="text-2xl font-bold">Monte seu prato</h2>
        <p class="text-sm text-gray-300">Escolha a base, a prote√≠na e 2 acompanhamentos ‚Äî simples e funcional.</p>
        <div class="grid md:grid-cols-2 gap-3">
          <div class="glass p-3 rounded-xl space-y-2">
            <label class="block">Base
              <select id="bBase" class="bg-gray-800 rounded p-2 w-full mt-1">
                <option value="Arroz branco">Arroz branco</option>
                <option value="Arroz integral">Arroz integral</option>
                <option value="Feij√£o carioca">Feij√£o carioca</option>
                <option value="Feij√£o preto">Feij√£o preto</option>
              </select>
            </label>
            <label class="block">Prote√≠na
              <select id="bProt" class="bg-gray-800 rounded p-2 w-full mt-1">
                <option value="Bife acebolado">Bife acebolado (+R$ 6)</option>
                <option value="Frango grelhado">Frango grelhado (+R$ 5)</option>
                <option value="Lingui√ßa toscana">Lingui√ßa toscana (+R$ 4)</option>
                <option value="Til√°pia grelhada">Til√°pia grelhada (+R$ 7)</option>
              </select>
            </label>
            <label class="block">Acompanhamentos (escolha 2)
              <div class="grid grid-cols-2 gap-2 mt-2 text-sm">
                <label><input type="checkbox" class="bAcomp" value="Farofa crocante"> Farofa</label>
                <label><input type="checkbox" class="bAcomp" value="Salada da casa"> Salada</label>
                <label><input type="checkbox" class="bAcomp" value="Legumes salteados"> Legumes</label>
                <label><input type="checkbox" class="bAcomp" value="Pur√™ de batatas"> Pur√™</label>
                <label><input type="checkbox" class="bAcomp" value="Polenta frita"> Polenta</label>
                <label><input type="checkbox" class="bAcomp" value="Vinagrete"> Vinagrete</label>
              </div>
            </label>
            <label class="block">Tamanho
              <select id="bTam" class="bg-gray-800 rounded p-2 w-full mt-1">
                <option value="P">P</option><option value="M" selected>M</option><option value="G">G</option>
              </select>
            </label>
            <label class="block">Observa√ß√µes
              <input id="bObs" class="bg-gray-800 rounded p-2 w-full mt-1" placeholder="Ex.: sem cebola, feij√£o separado">
            </label>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">Resumo</h3>
            <p class="text-sm text-gray-300">Pre√ßo base: <b>R$ 24,90</b></p>
            <p class="text-sm text-gray-300">Adicionais por prote√≠na</p>
            <div class="mt-2 text-lg font-extrabold text-amber-300">Total: <span id="bTotal">R$ 29,90</span></div>
            <button class="btn mt-3 w-full" onclick="adicionarPratoMontado()">Adicionar ao carrinho</button>
          </div>
        </div>
      </div>
    </section>

    <section id="view-marmitas" class="hidden space-y-4">
      <div class="card p-4 space-y-3">
        <h2 class="text-2xl font-bold">Marmitas</h2>
        <p class="text-sm text-gray-300">Planos di√°rio ou semanal ‚Äî personalize tamanho e trocas.</p>
        <div class="grid md:grid-cols-3 gap-3">
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">Tradicional</h3>
            <p class="text-sm text-gray-300">Arroz, feij√£o, prote√≠na do dia, 2 acompanhamentos.</p>
            <div class="mt-2 font-bold">R$ 29,90</div>
            <button class="btn mt-2" onclick="addMarmita('Tradicional')">Adicionar</button>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">Fit</h3>
            <p class="text-sm text-gray-300">Arroz integral, legumes, grelhado, salada.</p>
            <div class="mt-2 font-bold">R$ 32,90</div>
            <button class="btn mt-2" onclick="addMarmita('Fit')">Adicionar</button>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">Vegano</h3>
            <p class="text-sm text-gray-300">Gr√£os, vegetais, prote√≠na veg, salada.</p>
            <div class="mt-2 font-bold">R$ 31,90</div>
            <button class="btn mt-2" onclick="addMarmita('Vegano')">Adicionar</button>
          </div>
        </div>
        <div class="mt-3 flex flex-wrap gap-2">
          <label class="chip">Plano:
            <select id="marmitaPlano" class="bg-transparent ml-2">
              <option value="diario">Di√°rio</option>
              <option value="semanal">Semanal</option>
            </select>
          </label>
          <label class="chip">Tamanho:
            <select id="marmitaTamanho" class="bg-transparent ml-2">
              <option>P</option><option selected>M</option><option>G</option>
            </select>
          </label>
          <label class="chip">Trocas:
            <select id="marmitaTrocas" class="bg-transparent ml-2">
              <option>Nenhuma</option><option>Salada por Legumes</option><option>Feij√£o por Feijoada</option>
            </select>
          </label>
          <label class="chip">Dias/semana:
            <select id="marmitaDias" class="bg-transparent ml-2">
              <option>5</option><option>6</option><option>7</option>
            </select>
          </label>
          <button class="btn" onclick="assinarMarmita()">Ativar Assinatura</button>
        </div>
        <p id="assinaturaStatus" class="text-sm text-green-300"></p>
      </div>
    </section>

    <section id="view-promocoes" class="hidden space-y-4">
      <div class="card p-4 space-y-2">
        <h2 class="text-2xl font-bold">Promo√ß√µes & Cupons</h2>
        <ul class="list-disc ml-6 text-gray-300">
          <li>Ter√ßa do pastel: cupom <b>PASTELTERCA</b> (10% OFF)</li>
          <li>Quarta do executivo: cupom <b>QUARTAPRATO</b> (15% OFF)</li>
          <li>Bem-vindo: cupom <b>BEMVINDO</b> (20% OFF no 1¬∫ pedido)</li>
          <li>Marmitas: cupom <b>MARMITA10</b> (R$ 10 de desconto)</li>
        </ul>
        <div class="flex items-center gap-2 mt-2">
          <input id="cupomInput" placeholder="Inserir cupom..." class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 w-56" />
          <button class="btn" onclick="aplicarCupom()">Aplicar</button>
          <span id="cupomStatus" class="text-sm text-amber-300"></span>
        </div>
        <div class="mt-3">
          <label class="chip">
            <input type="checkbox" id="notifyToggle" class="mr-2"> Receber promo√ß√µes
          </label>
          <p class="text-xs text-gray-400">* Notifica√ß√µes simuladas no app.</p>
        </div>
      </div>
    </section>

    <section id="view-fidelidade" class="hidden space-y-4">
      <div class="card p-4">
        <h2 class="text-2xl font-bold">Programa de Fidelidade</h2>
        <p class="text-sm text-gray-300">Ganhe 1 ponto a cada R$ 10. Resgates autom√°ticos.</p>
        <div class="grid md:grid-cols-3 gap-3 mt-3">
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">50 pts</h3><p>Sobremesa gr√°tis</p>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">100 pts</h3><p>R$ 20 de desconto</p>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">200 pts</h3><p>Prato executivo gr√°tis</p>
          </div>
        </div>
        <div class="mt-3">
          <p class="text-lg">Seus pontos: <b id="pts">0</b></p>
          <p id="resgates" class="text-green-300 text-sm"></p>
        </div>
      </div>
    </section>

    <section id="view-avaliacoes" class="hidden space-y-4">
      <div class="card p-4">
        <h2 class="text-2xl font-bold">Avalia√ß√µes</h2>
        <div id="reviewsList" class="space-y-2 mt-2"></div>
        <div class="mt-4 grid md:grid-cols-2 gap-3">
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">Deixe sua avalia√ß√£o</h3>
            <label class="block text-sm mt-2">Nota (1 a 5)
              <input id="reviewStars" type="number" min="1" max="5" value="5" class="w-20 bg-gray-800 rounded p-2 ml-2" />
            </label>
            <textarea id="reviewText" class="w-full mt-2 bg-gray-800 rounded p-2" placeholder="Coment√°rio..."></textarea>
            <button class="btn mt-2" onclick="enviarReview()">Enviar</button>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">M√©dia</h3>
            <p class="text-3xl font-extrabold" id="mediaAvaliacao">‚Äî</p>
          </div>
        </div>
      </div>
    </section>

    <section id="view-conta" class="hidden space-y-4">
      <div class="card p-4 space-y-3">
        <h2 class="text-2xl font-bold">Minha Conta</h2>
        <div class="grid md:grid-cols-2 gap-3">
          <div class="glass p-3 rounded-xl">
            <label class="block">Nome
              <input id="userNome" class="w-full bg-gray-800 rounded p-2 mt-1" placeholder="Seu nome"/>
            </label>
            <label class="block mt-2">Telefone
              <input id="userTel" class="w-full bg-gray-800 rounded p-2 mt-1" placeholder="(xx) xxxxx-xxxx"/>
            </label>
            <label class="block mt-2">Endere√ßo
              <input id="userEnd" class="w-full bg-gray-800 rounded p-2 mt-1" placeholder="Rua, n¬∫, bairro, cidade"/>
            </label>
            <label class="block mt-2">Dist√¢ncia (km) p/ entrega
              <input id="userKm" type="number" min="0" step="0.5" class="w-40 bg-gray-800 rounded p-2 mt-1" value="2"/>
            </label>
            <button class="btn mt-3" onclick="salvarConta()">Salvar</button>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">Carteira</h3>
            <p>Saldo: <b id="saldo">R$ 0,00</b></p>
            <input id="recargaValor" type="number" step="1" class="bg-gray-800 rounded p-2 mt-2 w-40" placeholder="Valor da recarga" />
            <div class="flex gap-2 mt-2">
              <button class="chip" onclick="recarga('pix')">Recarga PIX</button>
              <button class="chip" onclick="recarga('cartao')">Recarga Cart√£o</button>
            </div>
            <p id="recargaStatus" class="text-green-300 text-sm mt-1"></p>
            <h3 class="font-bold mt-4">Seus Pedidos</h3>
            <div id="ordersList" class="text-sm text-gray-300 space-y-1"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="view-carrinho" class="hidden space-y-4">
      <div class="card p-4">
        <h2 class="text-2xl font-bold">Seu Carrinho</h2>
        <div id="cartList" class="mt-2 space-y-2"></div>
        <div class="mt-3 grid md:grid-cols-2 gap-3">
          <div class="glass p-3 rounded-xl">
            <div class="text-sm text-green-300 mb-1">‚è±Ô∏è Entrega estimada: 35‚Äì50 min</div>
            <label>Entrega ou Retirada?
              <select id="tipoPedido" class="bg-gray-800 rounded p-2 ml-2">
                <option value="retirada">Retirada</option>
                <option value="entrega">Entrega</option>
              </select>
            </label>
            <p class="text-sm text-gray-300 mt-1">Taxa de entrega calculada automaticamente.</p>
            <div class="mt-2">Subtotal: <b id="subtotal">R$ 0,00</b></div>
            <div>Cupom: <b id="cupomLabel">‚Äî</b></div>
            <div>Taxa entrega: <b id="taxaEntrega">R$ 0,00</b></div>
            <div class="text-xl font-extrabold mt-1">Total: <span id="total">R$ 0,00</span></div>
          </div>
          <div class="glass p-3 rounded-xl">
            <h3 class="font-bold">Pagamento</h3>
            <div class="flex gap-2 mt-2 flex-wrap">
              <button class="chip" onclick="pagar('pix')">PIX (QR Code)</button>
              <button class="chip" onclick="pagar('cartao')">Cart√£o</button>
              <button class="chip" onclick="pagar('carteira')">Carteira</button>
              <button class="chip" onclick="pagar('dinheiro')">Dinheiro</button>
            </div>
            <div id="pagamentoArea" class="mt-3"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <button class="floating-cart btn shadow-smooth" onclick="navigate('carrinho')">üõí <span id="cartCount">0</span></button>

  <footer class="max-w-6xl mx-auto px-4 py-10 text-center text-sm text-gray-400">
    ¬© <span id="year"></span> Restaurante de Bairro ‚Äî Feito com ‚ù§Ô∏è
  </footer>

  <div id="a2hsModal" class="hidden fixed inset-0 bg-black/60 z-50 items-center justify-center">
    <div class="bg-gray-900 rounded-2xl p-6 max-w-sm w-full text-center border border-gray-700">
      <h3 class="text-xl font-bold mb-2">Instalar no iPhone</h3>
      <p class="text-sm text-gray-300">No Safari, toque em <b>Compartilhar</b> e depois <b>Adicionar √† Tela de In√≠cio</b>.</p>
      <button id="closeA2HS" class="btn mt-4 w-full">Entendi</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('./service-worker.js', { scope:'./' }));
    }
  </script>
</body>
</html>
